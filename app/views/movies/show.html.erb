<div class="container">
<div class= "panel panel-default">
  <div class="panel-body">
    <div class= "row">
      <div class="col-md-8">
      <%= image_tag @movie.image.url(:medium) %>
      <div class="table-responsive">
        <table class="table">
          <tbody>
            <tr><td><strong>Description:</strong></td>
                <td><%= @movie.description %></td>
            </tr>
            <tr><td><strong>Movie length:</strong></td>
                <td><%= @movie.movie_length %></td>
            </tr>
             <tr><td><strong>Director:</strong></td>
                <td><%= @movie.director %></td>
            </tr>
             <tr><td><strong>Ratingh:</strong></td>
                <td><%= @movie.rating %></td>
            </tr>
            <tr><td><strong>Avarge Rating:</strong></td>
                <td><div class= "star-rating" data-score = <%= @avarge_review %>></div></td>
            </tr></br>
            
            <tr><td><div class= "reviews"><h3>Add a Review: </h3></div>
<%= form_for([@movie, @movie.reviews.build]) do |f| %>
  <p>
    <div id="star-rating"></div>
  </p>
  <p>
    <%= f.label :comment %><br>
    <%= f.text_area :comment %>
  </p>
  <p>
    <%= f.submit class: "btn  btn-danger" %>
  </p>
<% end %></strong></td></tr>
          </tbody>
        </table>
      </div>
      </div>
      <div class="col-md-4 pull-right">
        <h3> Movie Reviews</h3>
            <td><% @movie.reviews.each do |r| %></td>
            <td><div class= "star-rating" data-score = <%= r.rating %>></div></td>
          <td> <%= r.comment %></td>
          <% end %>
            
          </div>
    </div>
  </div>
</div>
<%= link_to 'Edit', edit_movie_path(@movie) %> |
<%= link_to 'Back', movies_path %> |
<script>
  $('.star-rating').raty({path: '/assets/', readOnly: true, 
    score: function(){
      return $(this).attr('data-score');
    }
  });
</script>
<script>
  $('#star-rating').raty({path: '/assets/', scoreName: 'review[rating]'
  });
</script>
</div>